ALTER TABLE DEV.UF DROP PRIMARY KEY CASCADE;

DROP TABLE DEV.UF CASCADE CONSTRAINTS;

CREATE TABLE DEV.UF
(
  COD_UF         NUMBER                     NOT NULL,
  NOME        VARCHAR2(2 BYTE)               NOT NULL,
  NOME_COMPLETO  VARCHAR2(50 BYTE)              NOT NULL
)
TABLESPACE USERS
PCTUSED    0
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;


CREATE UNIQUE INDEX DEV.UF_PK ON DEV.UF
(COD_UF)
LOGGING
TABLESPACE USERS
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL;


CREATE UNIQUE INDEX DEV.UF_U01 ON DEV.UF
(NOME)
LOGGING
TABLESPACE USERS
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL;


ALTER TABLE DEV.UF ADD (
  CONSTRAINT UF_PK
 PRIMARY KEY
 (COD_UF)
    USING INDEX 
    TABLESPACE USERS
    PCTFREE    10
    INITRANS   2
    MAXTRANS   255
    STORAGE    (
                INITIAL          64K
                NEXT             1M
                MINEXTENTS       1
                MAXEXTENTS       UNLIMITED
                PCTINCREASE      0
               ),
  CONSTRAINT UF_U01
 UNIQUE (NOME)
    USING INDEX 
    TABLESPACE USERS
    PCTFREE    10
    INITRANS   2
    MAXTRANS   255
    STORAGE    (
                INITIAL          64K
                NEXT             1M
                MINEXTENTS       1
                MAXEXTENTS       UNLIMITED
                PCTINCREASE      0
               ));


INSERT INTO UF (COD_UF, NOME, NOME_COMPLETO) VALUES (1, 'MS', 'Mato Grosso do Sul');
INSERT INTO UF (COD_UF, NOME, NOME_COMPLETO) VALUES (2, 'RS', 'Rio Grande do Sul');
INSERT INTO UF (COD_UF, NOME, NOME_COMPLETO) VALUES (3, 'MT', 'Mato Grosso');
INSERT INTO UF (COD_UF, NOME, NOME_COMPLETO) VALUES (4, 'SP', 'São Paulo');
COMMIT;





ALTER TABLE DEV.CIDADES DROP PRIMARY KEY CASCADE;

DROP TABLE DEV.CIDADES CASCADE CONSTRAINTS;

CREATE TABLE DEV.CIDADES
(
  COD_CIDADE         NUMBER                     NOT NULL,
  COD_UF         NUMBER                     NOT NULL,
  NOME        VARCHAR2(20 BYTE)               NOT NULL
)
TABLESPACE USERS
PCTUSED    0
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;


CREATE UNIQUE INDEX DEV.CIDADES_PK ON DEV.CIDADES
(COD_CIDADE)
LOGGING
TABLESPACE USERS
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL;


CREATE UNIQUE INDEX DEV.CIDADES_U01 ON DEV.CIDADES
(NOME)
LOGGING
TABLESPACE USERS
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
NOPARALLEL;


ALTER TABLE DEV.CIDADES ADD (
  CONSTRAINT CIDADES_PK
 PRIMARY KEY
 (COD_CIDADE)
    USING INDEX 
    TABLESPACE USERS
    PCTFREE    10
    INITRANS   2
    MAXTRANS   255
    STORAGE    (
                INITIAL          64K
                NEXT             1M
                MINEXTENTS       1
                MAXEXTENTS       UNLIMITED
                PCTINCREASE      0
               ),
  CONSTRAINT CIDADES_U01
 UNIQUE (NOME)
    USING INDEX 
    TABLESPACE USERS
    PCTFREE    10
    INITRANS   2
    MAXTRANS   255
    STORAGE    (
                INITIAL          64K
                NEXT             1M
                MINEXTENTS       1
                MAXEXTENTS       UNLIMITED
                PCTINCREASE      0
               ));


CREATE OR REPLACE PACKAGE DEV."DML_PESSOAS" IS
    PROCEDURE INS_PESSOAS (
        out_COD_PESSOA OUT DEV.PESSOAS.COD_PESSOA%TYPE,
        in_NOME IN DEV.PESSOAS.NOME%TYPE,
        in_CPF IN DEV.PESSOAS.CPF%TYPE,
        in_RG IN DEV.PESSOAS.RG%TYPE,
        in_TELEFONE IN DEV.PESSOAS.TELEFONE%TYPE,
        in_EMAIL IN DEV.PESSOAS.EMAIL%TYPE,
        in_SEXO IN DEV.PESSOAS.SEXO%TYPE,
        in_DATA_NASCIMENTO IN DEV.PESSOAS.DATA_NASCIMENTO%TYPE
    );
END DML_PESSOAS;
/



CREATE OR REPLACE PACKAGE BODY DEV."DML_PESSOAS"
IS
   PROCEDURE INS_PESSOAS (
        out_COD_PESSOA OUT DEV.PESSOAS.COD_PESSOA%TYPE,
        in_NOME IN DEV.PESSOAS.NOME%TYPE,
        in_CPF IN DEV.PESSOAS.CPF%TYPE,
        in_RG IN DEV.PESSOAS.RG%TYPE,
        in_TELEFONE IN DEV.PESSOAS.TELEFONE%TYPE,
        in_EMAIL IN DEV.PESSOAS.EMAIL%TYPE,
        in_SEXO IN DEV.PESSOAS.SEXO%TYPE,
        in_DATA_NASCIMENTO IN DEV.PESSOAS.DATA_NASCIMENTO%TYPE)
   IS
   BEGIN
      INSERT INTO DEV.PESSOAS (NOME,
                                      CPF,
                                      RG,
                                      TELEFONE,
                                      EMAIL,
                                      SEXO,
                                      DATA_NASCIMENTO)
           VALUES (in_NOME,
                         in_CPF,
                         in_RG,
                         in_TELEFONE,
                         in_EMAIL,
                         in_SEXO,
                         in_DATA_NASCIMENTO)
        RETURNING COD_PESSOA
             INTO out_COD_PESSOA;
   END INS_PESSOAS;
END DML_PESSOAS;
/



INSERT INTO DEV.CIDADES (COD_CIDADE, COD_UF, NOME) VALUES (1, 1, 'Campo Grande');
INSERT INTO DEV.CIDADES (COD_CIDADE, COD_UF, NOME) VALUES (2, 1, 'Três Lagoas');
INSERT INTO DEV.CIDADES (COD_CIDADE, COD_UF, NOME) VALUES (3, 1, 'Bonito');

INSERT INTO DEV.CIDADES (COD_CIDADE, COD_UF, NOME) VALUES (4, 2, 'Porto Alegre');
INSERT INTO DEV.CIDADES (COD_CIDADE, COD_UF, NOME) VALUES (5, 2, 'Santa Maria');
INSERT INTO DEV.CIDADES (COD_CIDADE, COD_UF, NOME) VALUES (6, 2, 'Santo Ângelo');

INSERT INTO DEV.CIDADES (COD_CIDADE, COD_UF, NOME) VALUES (7, 3, 'Cuiabá');
INSERT INTO DEV.CIDADES (COD_CIDADE, COD_UF, NOME) VALUES (8, 3, 'Tangará da Serra');
INSERT INTO DEV.CIDADES (COD_CIDADE, COD_UF, NOME) VALUES (9, 3, 'Alta Floresta');

INSERT INTO DEV.CIDADES (COD_CIDADE, COD_UF, NOME) VALUES (10, 4, 'São Paulo');
INSERT INTO DEV.CIDADES (COD_CIDADE, COD_UF, NOME) VALUES (11, 4, 'Santo André');
INSERT INTO DEV.CIDADES (COD_CIDADE, COD_UF, NOME) VALUES (12, 4, 'Diadema');

COMMIT;


